# LoveXAI Studio å•†ä¸šæ¨¡å¼æ–¹æ¡ˆ

**ç‰ˆæœ¬**: 2.0 (æœ€ç»ˆç‰ˆ)  
**æ—¥æœŸ**: 2025-12-10  
**çŠ¶æ€**: âœ… å·²ç¡®è®¤

---

## ğŸ¯ å•†ä¸šæ¨¡å¼ï¼šè®¢é˜… + ç§¯åˆ†åŒ…

### æ ¸å¿ƒç†å¿µ
1. **ä½é—¨æ§›å…¥é—¨** - æ–°ç”¨æˆ·æ³¨å†Œé€ç§¯åˆ†ä½“éªŒ
2. **è®¢é˜…è§£é”é«˜çº§åŠŸèƒ½** - æœˆ/å¹´åº¦è®¢é˜…åˆ¶
3. **ç§¯åˆ†åŒ…è¡¥å……æ¶ˆè´¹** - æ»¡è¶³é‡åº¦ç”¨æˆ·éœ€æ±‚
4. **ç®€å•æ¸…æ™°** - æ— å¤æ‚å€æ•°ï¼Œç”¨æˆ·æ˜“ç†è§£

---

## ğŸ’ ä¼šå‘˜ç­‰çº§ä½“ç³» (4çº§)

### ä»·æ ¼è¡¨

| ç­‰çº§ | æœˆä»˜ä»·æ ¼ | å¹´ä»˜ä»·æ ¼ (æœˆå‡) | å¹´ä»˜æ€»ä»· | èŠ‚çœ |
|------|----------|-----------------|----------|------|
| FREE | $0 | - | - | - |
| PLUS | $9.99 | $6.99 | $83.88 | $36/å¹´ |
| PRO | $19.99 | $13.99 | $167.88 | $72/å¹´ |
| ULTIMATE | $29.99 | $20.99 | $251.88 | $108/å¹´ |

**å¹´ä»˜æŠ˜æ‰£**: 30%

---

## ğŸ“‹ ä¼šå‘˜æƒé™ä¸€è§ˆè¡¨

| æƒé™é¡¹ | FREE | PLUS | PRO | ULTIMATE |
|--------|:----:|:----:|:---:|:--------:|
| **ğŸ’° ç§¯åˆ†** |||||
| ç§¯åˆ†è·å– | 150 (æ³¨å†Œä¸€æ¬¡æ€§) | 500/æœˆ | 2000/æœˆ | 5000/æœˆ |
| **ğŸ” Discover åˆ’ä¸€åˆ’** |||||
| æ¯æ—¥æ»‘åŠ¨æ¬¡æ•° | 10æ¬¡ | 30æ¬¡ | 50æ¬¡ | æ— é™ |
| **ğŸ’¬ å¯¹è¯åŠŸèƒ½** |||||
| æ¶ˆæ¯å‘é€ | æ¶ˆè€—ç§¯åˆ† | æ¶ˆè€—ç§¯åˆ† | æ¶ˆè€—ç§¯åˆ† | æ¶ˆè€—ç§¯åˆ† |
| æ¶ˆæ¯è®°å¿†é•¿åº¦ | 10æ¡ | 20æ¡ | 30æ¡ | 50æ¡ |
| **ğŸ¨ å›¾ç‰‡ç”Ÿæˆ** |||||
| å›¾ç‰‡ç”Ÿæˆ | æ¶ˆè€—ç§¯åˆ† | æ¶ˆè€—ç§¯åˆ† | æ¶ˆè€—ç§¯åˆ† | æ¶ˆè€—ç§¯åˆ† |
| ç”Ÿæˆæ¨¡å‹ | åŸºç¡€æ¨¡å‹ | æ ‡å‡†æ¨¡å‹ | é«˜çº§æ¨¡å‹ | é¡¶çº§æ¨¡å‹ |
| **âœ¨ Prompt ä¼˜åŒ–** |||||
| AIå¢å¼ºæè¿°è¯ | æ¶ˆè€—ç§¯åˆ† | æ¶ˆè€—ç§¯åˆ† | æ¶ˆè€—ç§¯åˆ† | æ¶ˆè€—ç§¯åˆ† |
| **ğŸ¤– èŠå¤© AI æ¨¡å‹** |||||
| Nova (åŸºç¡€) | âœ… | âœ… | âœ… | âœ… |
| Pulsar (è¿›é˜¶) | âŒ | âœ… | âœ… | âœ… |
| Nebula (é«˜çº§) | âŒ | âŒ | âœ… | âœ… |
| Quasar (é¡¶çº§) | âŒ | âŒ | âŒ | âœ… |
| **ğŸ‘¥ è§’è‰²è®¿é—®** |||||
| Free è§’è‰² | âœ… å¯èŠ | âœ… | âœ… | âœ… |
| Plus è§’è‰² | âŒ ä¸èƒ½èŠ | âœ… | âœ… | âœ… |
| Pro è§’è‰² | âŒ | âŒ | âœ… | âœ… |
| Ultimate ä¸“å±è§’è‰² | âŒ | âŒ | âŒ | âœ… |
| **ğŸ›  è‡ªå®šä¹‰è§’è‰²** |||||
| åˆ›å»ºæ•°é‡ | âŒ | 5ä¸ª | 15ä¸ª | æ— é™ |

---

## âš¡ ç§¯åˆ†æ¶ˆè€—è§„åˆ™

### èŠå¤©æ¶ˆæ¯ (æŒ‰æ¨¡å‹)

| æ¨¡å‹ | ä»£å· | æ¶ˆè€—/æ¡ | å¯ç”¨ç­‰çº§ |
|------|------|---------|----------|
| Nova | gpt-4o-mini | 2 ç§¯åˆ† | å…¨éƒ¨ |
| Pulsar | gemini-2-flash | 4 ç§¯åˆ† | PLUS+ |
| Nebula | deepseek-r1 | 6 ç§¯åˆ† | PRO+ |
| Quasar | gpt-4.5 | 10 ç§¯åˆ† | ULTIMATE |

### å›¾ç‰‡ç”Ÿæˆ (æŒ‰ç­‰çº§æ¨¡å‹)

| ä¼šå‘˜ç­‰çº§ | ä½¿ç”¨æ¨¡å‹ | æ¶ˆè€—/å¼  |
|----------|----------|---------|
| FREE | åŸºç¡€æ¨¡å‹ | 10 ç§¯åˆ† |
| PLUS | æ ‡å‡†æ¨¡å‹ | 10 ç§¯åˆ† |
| PRO | é«˜çº§æ¨¡å‹ | 15 ç§¯åˆ† |
| ULTIMATE | é¡¶çº§æ¨¡å‹ | 20 ç§¯åˆ† |

### Prompt ä¼˜åŒ–

| åŠŸèƒ½ | æ¶ˆè€— |
|------|------|
| AI å¢å¼ºæè¿°è¯ | 2 ç§¯åˆ†/æ¬¡ |

---

## ğŸª™ ç§¯åˆ†åŒ…å®šä»·

| ç§¯åˆ†æ•° | ä»·æ ¼ | èµ é€ | å•ä»· | æ€§ä»·æ¯” |
|--------|------|------|------|--------|
| 500 | $2.99 | 0 | $0.006 | åŸºç¡€ |
| 1,500 | $7.99 | +100 | $0.005 | çœ17% |
| 3,000 | $14.99 | +300 | $0.0045 | çœ25% |
| 6,000 | $27.99 | +800 | $0.0041 | çœ32% |
| 12,000 | $49.99 | +2000 | $0.0036 | çœ40% |
| 30,000 | $99.99 | +7500 | $0.0027 | çœ55% |

---

## ğŸ“Š ç”¨æˆ·ä½“éªŒé¢„ä¼°

### FREE ç”¨æˆ· (150ç§¯åˆ†ä¸€æ¬¡æ€§)

| ä½¿ç”¨æ–¹å¼ | å¯ä½¿ç”¨æ¬¡æ•° |
|----------|------------|
| çº¯èŠå¤© (Nova) | 75æ¡æ¶ˆæ¯ |
| çº¯ç”Ÿå›¾ | 15å¼  |
| æ··åˆä½¿ç”¨ | 50æ¡ + 5å¼  |

**å®šä½**: å®Œæ•´ä½“éªŒæ ¸å¿ƒåŠŸèƒ½ï¼Œæ¿€å‘ä»˜è´¹æ¬²æœ›

### PLUS ç”¨æˆ· (500ç§¯åˆ†/æœˆ)

| ä½¿ç”¨æ–¹å¼ | å¯ä½¿ç”¨æ¬¡æ•° |
|----------|------------|
| çº¯èŠå¤© (Nova) | 250æ¡/æœˆ |
| çº¯èŠå¤© (Pulsar) | 125æ¡/æœˆ |
| çº¯ç”Ÿå›¾ | 50å¼ /æœˆ |

**å®šä½**: è½»åº¦ç”¨æˆ·æ—¥å¸¸ä½¿ç”¨

### PRO ç”¨æˆ· (2000ç§¯åˆ†/æœˆ)

| ä½¿ç”¨æ–¹å¼ | å¯ä½¿ç”¨æ¬¡æ•° |
|----------|------------|
| çº¯èŠå¤© (Nova) | 1000æ¡/æœˆ |
| çº¯èŠå¤© (Nebula) | 333æ¡/æœˆ |
| çº¯ç”Ÿå›¾ | 133å¼ /æœˆ |

**å®šä½**: é‡åº¦ç”¨æˆ·èˆ’é€‚ä½¿ç”¨

### ULTIMATE ç”¨æˆ· (5000ç§¯åˆ†/æœˆ)

| ä½¿ç”¨æ–¹å¼ | å¯ä½¿ç”¨æ¬¡æ•° |
|----------|------------|
| çº¯èŠå¤© (Nova) | 2500æ¡/æœˆ |
| çº¯èŠå¤© (Quasar) | 500æ¡/æœˆ |
| çº¯ç”Ÿå›¾ | 250å¼ /æœˆ |

**å®šä½**: VIPç”¨æˆ·ç•…å¿«ä½¿ç”¨

---

## ğŸ”§ æŠ€æœ¯å®ç°è¦ç‚¹

### 1. ç”¨æˆ·è¡¨ Schema

```typescript
// convex/schema.ts
users: defineTable({
  email: v.string(),
  name: v.string(),
  avatar_url: v.optional(v.string()),
  
  // è®¢é˜…ç›¸å…³
  subscription_tier: v.string(), // 'free' | 'plus' | 'pro' | 'ultimate'
  subscription_expires_at: v.optional(v.string()),
  
  // ç§¯åˆ†ç›¸å…³
  credits_balance: v.number(),
  
  // Discover æ»‘åŠ¨æ¬¡æ•° (æ¯æ—¥é‡ç½®)
  daily_swipes_used: v.optional(v.number()),
  last_swipe_reset_date: v.optional(v.string()),
  
  // è‡ªå®šä¹‰è§’è‰²æ•°é‡
  custom_characters_count: v.optional(v.number()),
})
```

### 2. æƒé™æ£€æŸ¥å¸¸é‡

```typescript
// lib/permissions.ts
export const TIER_LIMITS = {
  free: {
    daily_swipes: 10,
    memory_length: 10,
    custom_characters: 0,
    models: ['nova'],
    character_access: ['free'],
    image_credits: 10,
  },
  plus: {
    daily_swipes: 30,
    memory_length: 20,
    custom_characters: 5,
    models: ['nova', 'pulsar'],
    character_access: ['free', 'plus'],
    image_credits: 10,
  },
  pro: {
    daily_swipes: 50,
    memory_length: 30,
    custom_characters: 15,
    models: ['nova', 'pulsar', 'nebula'],
    character_access: ['free', 'plus', 'pro'],
    image_credits: 15,
  },
  ultimate: {
    daily_swipes: Infinity,
    memory_length: 50,
    custom_characters: Infinity,
    models: ['nova', 'pulsar', 'nebula', 'quasar'],
    character_access: ['free', 'plus', 'pro', 'ultimate'],
    image_credits: 20,
  },
};

export const MODEL_CREDITS = {
  nova: 2,
  pulsar: 4,
  nebula: 6,
  quasar: 10,
};

export const PROMPT_ENHANCE_CREDITS = 2;
```

### 3. ç§¯åˆ†æ‰£è´¹é€»è¾‘

```typescript
// èŠå¤©æ¶ˆæ¯æ‰£è´¹
function deductChatCredits(user, model) {
  const cost = MODEL_CREDITS[model];
  if (user.credits_balance < cost) {
    throw new Error('Insufficient credits');
  }
  user.credits_balance -= cost;
}

// å›¾ç‰‡ç”Ÿæˆæ‰£è´¹
function deductImageCredits(user) {
  const cost = TIER_LIMITS[user.subscription_tier].image_credits;
  if (user.credits_balance < cost) {
    throw new Error('Insufficient credits');
  }
  user.credits_balance -= cost;
}
```

---

## âœ… å®æ–½æ£€æŸ¥æ¸…å•

- [x] æ›´æ–° Convex schema (ç”¨æˆ·è¡¨) - `convex/schema.ts`
- [x] åˆ›å»ºæƒé™æ£€æŸ¥å·¥å…·å‡½æ•° - `lib/permissions.ts`, `convex/utils/permissions.ts`
- [x] æ›´æ–°èŠå¤©æ¶ˆæ¯å‘é€é€»è¾‘ (æ‰£ç§¯åˆ†) - `convex/actions.ts`
- [x] æ›´æ–°å›¾ç‰‡ç”Ÿæˆé€»è¾‘ (æ‰£ç§¯åˆ†) - `convex/images.ts`
- [x] æ›´æ–° Prompt ä¼˜åŒ–é€»è¾‘ (æ‰£ç§¯åˆ†) - `convex/actions.ts`
- [x] å®ç° Discover æ¯æ—¥æ»‘åŠ¨é™åˆ¶ - `convex/users.ts`
- [x] æ›´æ–°å®šä»·é¡µé¢ (pricing) - `app/[locale]/(default)/pricing/page.tsx`
- [x] æ›´æ–°è®¢å•å¤„ç†é€»è¾‘ - `convex/orders.ts`
- [x] å®ç°è®¢é˜…åˆ°æœŸåé™çº§é€»è¾‘ - `convex/subscriptions.ts`, `convex/crons.ts`
- [x] å‰ç«¯æƒé™ Hook - `hooks/usePermissions.ts`
- [x] å‰ç«¯æƒé™ UI ç»„ä»¶ - `components/ui/permission-ui.tsx`

---

**æ–‡æ¡£ç‰ˆæœ¬**: 2.2  
**æœ€åæ›´æ–°**: 2025-12-10 17:47
